(function(e){var r={idMenu:null,posX:null,posY:null,bindLeftClick:false};var t={init:function(t){if(typeof t==="string"){t={idMenu:t}}t=e.extend(true,{},r,t);if(t.idMenu==null){e.error("No menu specified");return}else if(e("#"+t.idMenu)==null){e.error("The menu specified does not exist");return}e("html").bind("contextmenu click",function(){e("#"+t.idMenu).hide()});this.bind("contextmenu "+(t.bindLeftClick?" click":""),function(r){r.preventDefault();r.stopPropagation();var i=t.posX==null?r.pageX:t.posX;var n=t.posY==null?r.pageY:t.posY;var s=e("#"+t.idMenu),a=s.outerHeight(),o=e(window).height();if(n+a>o){n=n-a}e("#"+t.idMenu).css({top:n+"px",left:i+"px"}).show()})}};e.fn.auderoContextMenu=function(r){if(t[r])return t[r].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof r==="object"||typeof r==="string"||!r)return t.init.apply(this,arguments);else e.error("Method "+r+" does not exist on jQuery.auderoContextMenu")}})($ry);(function(e){e.fn.draggable=function(r){var t=this;var i={handle:"",cursor:"move",axis:null,containParent:false,viewPort:true};r=e.extend(i,r);if(r.handle===""){var n=t}else{var n=t.find(r.handle)}return n.css("cursor",r.cursor).bind("mousedown",function(t){if(r.handle===""){var i=e(this).addClass("draggable")}else{var i=e(this).addClass("active-handle").parent().addClass("draggable")}var s=i.css("z-index"),a=i.outerHeight(),o=i.outerWidth(),d=i.offset().top+a-t.pageY,c=i.offset().left+o-t.pageX;var l=e(this).parent();var u=l.width(),f=l.height();var y=parseInt(l.offset().left)+parseInt(l.css("padding-left").replace("px","")),p=y+u,h=parseInt(l.offset().top)+parseInt(l.css("padding-top").replace("px","")),v=h+f;var g=i,m=g.offset(),b=g.outerHeight(),w=g.outerWidth(),$=e(window).height(),_=e(window).width(),x=e(window).scrollTop(),k=e(window).scrollLeft();i.stop(true,false).data("dragging","1");i.css("z-index",1e3).parents().bind("mousemove",function(t){var l=t.pageY+d-a,u=t.pageX+c-o,f=null;if(r.containParent===true){if(u<y)u=y;if(u>p-o)u=p-o;if(l<h)l=h;if(l>v-a)l=v-a}if(r.viewPort===true){if(u<k)u=k;if(u>_+k-w)u=_+k-w;if(l<x)l=x;if(l>$+x-b)l=$+x-b}if(r.axis=="x"){f={left:u}}else if(r.axis=="y"){f={top:l}}else{f={left:u,top:l}}e(".draggable").offset(f);e(".draggable, html").bind("mouseup",function(){i.parents().unbind("mousemove");e(n).removeClass("draggable").css("z-index",s).data("dragging","0")})});t.preventDefault()}).bind("mouseup",function(){if(r.handle===""){e(this).removeClass("draggable")}else{e(this).removeClass("active-handle").parent().removeClass("draggable")}n.unbind("mousedown",function(e){e.preventDefault()})})}})($ry);(function(e){var r=e(document),t=false,i=false,n={x:null,y:null},s=Math.abs;var a={"mousedown.mclick":function(e){n.x=e.pageX;n.y=e.pageY;t=false},"mouseup.mclick":function(r){t=s(n.x-r.pageX)>e.clickMouseMoved.threshold||s(n.y-r.pageY)>e.clickMouseMoved.threshold},"mousemove.mclick":function(r){i=s(n.x-r.pageX)>e.moveValid.threshold||s(n.y-r.pageY)>e.moveValid.threshold}};r.bind(a);e.clickMouseMoved=function(){return t};e.moveValid=function(){return i};e.clickMouseMoved.threshold=3;e.moveValid.threshold=1})($ry);function effectUtil(){var e={addEdgeAsorb:["edge_direction"]};function r(e){var r=e,t=parseInt(r.outerWidth(),10),i=parseInt(r.outerHeight(),10),n=parseInt($ry(window).width(),10),s=parseInt($ry(window).height(),10),a=parseInt(r.css("left")!=="auto"?r.css("left"):0,10),o=n-a-t,d=parseInt(r.css("top")!=="auto"?r.css("top"):0,10),c=s-d-i;var l={left:parseInt(a,10),top:parseInt(d,10),right:parseInt(o,10),bottom:parseInt(c,10)};return l}function t(e,r,t,i,n){var s=e,a=r||"l",o=parseInt(t,10)||0,d=parseInt(s.outerWidth(),10),c=parseInt(s.outerHeight(),10),l=parseInt($ry(window).width(),10),u=parseInt($ry(window).height(),10),f={};switch(a){case"l":f={left:o,right:"auto"};break;case"t":f={top:o,bottom:"auto"};break;case"r":f={left:l-d-o,right:"auto"};break;case"b":f={top:u-c-o,bottom:"auto"};break;default:break}s.stop().animate(f,parseInt(i,10),n)}function i(e,t){var i=r(e);for(name in i){if(parseInt(i[name],10)<=t){return name.charAt(0)}}return""}return{addDragDrop:function(e){if(!e){return}e.draggable({viewPort:true})},addEdgeAsorb:function(r,n,s){var a=10,o=0-parseInt($ry(r).outerWidth(),10)*2/3,d=(e["addEdgeAsorb"]||[])[0]||"addEdgeAsorb_edge_dir",c=500;if(!r){return}var l;var u=30,f=66;r.hover(function(){if(r.data("dragging")==="1"){return}if($ry("#rys-context-menu").is(":visible").length>0){return}var e=$ry(this).data(d)||"";var s=i($ry(this),a)||"";if(s&&e&&e.charAt(1)=="1"){t($ry(r),e.charAt(0),a,c,function(){$ry(r).data(d,e.charAt(0)+"0")});$ry(this).data(d,"")}else if(n){if($ry(".rys-birdie:visible").length>0){return}r.find("img").stop().animate({height:f,width:f},c,function(){elfin.rys_trace.trace_fun("hover")})}},function(){if(r.data("dragging")==="1"){return}if($ry("#rys-context-menu").is(":visible").length>0){return}if(s()){return}var e=i($ry(this),a)||"";if(e){t($ry(r),e,o,c,function(){$ry(r).data(d,e+"1")})}else if(n){if($ry(".rys-birdie:visible").length>0){return}r.find("img").stop().animate({height:u,width:u},c,function(){elfin.rys_trace.trace_fun("hover")})}});var y=0;$ry(window).bind("resize",function(){if(y%2===0){if(s()){return}if(r.data("dragging")==="1"){return}if($ry("#rys-context-menu").is(":visible")){return}var e=r.data(d)||"";if(e&&e.charAt(1)=="1"){t(r,e.charAt(0),o,0)}}})},addOpacityHover:function(e,r){var t=.2,i=1,n=200;if(!e){return}var s;e.hover(function(){if(e.data("dragging")==="1"){return}if($ry("#rys-context-menu").is(":visible")){return}clearTimeout(s);s=setTimeout(function(){e.animate({opacity:i},n)},150)},function(){if(e.data("dragging")==="1"){return}if($ry("#rys-context-menu").is(":visible")){return}if(r()){return}clearTimeout(s);s=setTimeout(function(){e.animate({opacity:t},n)},150)})},addEject:function(e){if(!e){return}var r=this;$ry(".rys-birdie").css("opacity",.3);e.eject.config({birdies:".rys-birdie",radius:130,duration:300,interval:30,initLeft:10,initBottom:10,isBirdieRotate:true});e.click(function(e){if($ry.clickMouseMoved()){return}if(!$ry(this).data("expandState")){$ry(this).eject.expand()}else{$ry(this).eject.collapse()}$ry(this).data("expandState",!$ry(this).data("expandState"));elfin.rys_trace.trace_fun("click_main");e.stopPropagation();return false})}}}var elfin={init:function(){var e=this;this.insertElfinHtml();$ry("#rys-elfin").auderoContextMenu("rys-context-menu");var r=$ry("#rys-elfin");var t={eject:true,dragDrop:true,edgeAsorb:true,opacityHover:true,resizeHover:true};if($ry.browser&&$ry.browser.msie||$ry.support&&!$ry.support.opacity){t={eject:true,dragDrop:true,edgeAsorb:false,opacityHover:false,resizeHover:false}}var i=effectUtil();if(t.dragDrop){i.addDragDrop(r)}if(t.edgeAsorb){i.addEdgeAsorb(r,true,function(){return!!($ry(".rys-birdie:visible").length>0)})}if(t.opacityHover){i.addOpacityHover(r,function(){return!!($ry(".rys-birdie:visible").length>0)})}if(t.resizeHover){}if(t.eject){i.addEject(r.find(".rys-nest"))}this.bindEvents()},index:{video:0,music:1,game:2,nav:3,android:4},insertElfinHtml:function(){var e="http://static.ruyisou.net";var r=e+"/elfin/css/images/rys-logo.png";if($ry.browser&&$ry.browser.msie&&$ry.browser.version=="6.0"&&!$ry.support.style){r=e+"/elfin/css/images/rys-logo-8bit.png"}var t=['<div id="rys-elfin"  style="border:none;display:none;">','<img src="'+r+'" class="rys-nest">',"</img>",'<div id="" class="rys-birdie" cat="video">','<a href="javascript:void(0);" class="rys-birdie-central rys-birdie-central-video"></a>',"</div>",'<div id="" class="rys-birdie" cat="music">','<a href="javascript:void(0);" class="rys-birdie-central  rys-birdie-central-music"></a>',"</div>",'<div id="" class="rys-birdie" cat="game">','<a href="javascript:void(0);" class="rys-birdie-central rys-birdie-central-game"></a>',"</div>",'<div id="" class="rys-birdie" cat="nav">','<a href="javascript:void(0);" class="rys-birdie-central rys-birdie-central-nav"></a>',"</div>",'<div id="" class="rys-birdie" cat="android">','<a href="javascript:void(0);" class="rys-birdie-central  rys-birdie-central-android"></a>',"</div>",'<div class="rys-prompt-bubble-wrap">','<span class="rys-prompt-bubble"></span>',"</div>","</div>",'<div id="rys-context-menu"  class="rys-context-menu-container">','<ul class="audero-context-menu">','<li id="J_rys-show-main-window">','<div class="col col-1"><span class="item-flag">&nbsp;</span></div><div class="col col-2">',"<span>\u6253\u5f00\u4e3b\u7a97\u53e3</span>","</div>","</li>",'<li id="J_rys-fullscreen-auto-hide">','<div class="col col-1"><span class="item-flag">&nbsp;</span></div><div class="col col-2">',"<span>\u5168\u5c4f\u65f6\u9690\u85cf</span>","</div>","</li>",'<li id="J_rys-hide-logo">','<div class="col col-1"><span class="item-flag">&nbsp;</span></div><div class="col col-2">',"<span>\u9690\u85cf\u5c0f\u56fe\u6807</span>","</div>","</li>","</ul>","</div>"];$ry("body").append(t.join(""));return $ry("#rys-elfin")},rys_trace:{trace_map:{load:"3000_101",hover:"3000_102",click_main:"3000_103",click_video:"3000_1031",click_music:"3000_1032",click_game:"3000_1033",click_nav:"3000_1034",click_android:"3000_1035",hide:"3000_104"},trace_fun:function(e,r){var t=elfin.constants;if(!t){var t=document.getElementById("ruyisomain")||{};t=t.src&&t.src.substring(t.src.indexOf("?")+1);var i=t.split("&");t={};var n;for(var s=0,a=i.length;s<a;s++){n=i[s].split("=");t[n[0]]=n[1]||""}}var o=r||{},d=t||{},c=(this.trace_map[e]||"").split("_")||[];try{var l=window.location||document.location;(new Image).src="http://tr.bang5mai.com/rys/__utm.gif"+"?uid="+(d.uuid||"guest")+"&ct="+Math.ceil((new Date).getTime()/1e3)+"&lt="+(c[0]||"")+"&ad="+(c[1]||"")+(o.ss?"&ss="+o.ss:"")+"&sr="+window.screen.width+"x"+window.screen.height+"&cl="+encodeURIComponent(d.source)+"&ver="+d.version+"&dl="+encodeURIComponent(l.href)}catch(u){}}},bindEvents:function(){var e=this;if($ry.browser&&$ry.browser.msie||$ry.support&&!$ry.support.opacity){}else{$ry("#rys-elfin").css("opacity",.1).find(".rys-nest").css({width:"30px",height:"30px"})}if(/msie 6/i.test(navigator.userAgent)){$ry("#rys-context-menu li").hover(function(){$ry(this).addClass("li-hover")},function(){$ry(this).removeClass("li-hover")})}$ry("#J_rys-fullscreen-auto-hide").click(function(){if($ry(this).data("auto-hide")){$ry(this).find(".item-flag").removeClass("item-flag-checked")}else{$ry(this).find(".item-flag").addClass("item-flag-checked")}$ry(this).data("auto-hide",!$ry(this).data("auto-hide"))});$ry("#J_rys-show-main-window").click(function(){try{document.getElementById("ruyisoplugin").runRYS(0)}catch(e){}});$ry("#J_rys-hide-logo").click(function(){try{document.getElementById("ruyisoplugin").isLoadJS=false}catch(r){}$ry("#rys-elfin").hide();e.rys_trace.trace_fun("hide")});var r=0;$ry(window).bind("resize",function(){var e=true;try{e=document.getElementById("ruyisoplugin").isLoadJS}catch(t){e=document.body.getAttribute("isLoadJS")=="true"?true:false}var i=$ry("#J_rys-fullscreen-auto-hide").data("auto-hide");if(++r%2===0){if(i){setTimeout(function(){var r=false;if(/webkit/.test(navigator.userAgent.toLowerCase())){if(screen.width==window.outerWidth&&screen.height==window.outerHeight){r=true}}else if(/msie/.test(navigator.userAgent.toLowerCase())){if(!window.screenTop&&!window.screenY){r=true}}else{if(!window.screenTop&&!window.screenY){r=true}}if(r){$ry("#rys-elfin").hide()}else{if(e){$ry("#rys-elfin").show()}}},300)}else{if(e){$ry("#rys-elfin").show()}}}});(function(){function e(){var e=false;try{e=document.getElementById("ruyisoplugin").isShowTip||false}catch(r){e=document.body.getAttribute("isShowTip")=="true"?true:false}return e}function r(e){var r=false;try{document.getElementById("ruyisoplugin").isShowTip=e;r=true}catch(t){}return r}if(e()){if($ry.browser&&$ry.browser.msie||$ry.support&&!$ry.support.opacity){return false}$ry(".rys-prompt-bubble-wrap").show();setTimeout(function(){var e=$ry(".rys-prompt-bubble-wrap");if($ry.browser&&$ry.browser.msie||$ry.support&&!$ry.support.opacity){setTimeout(function(){$ry(e).hide();r(false)},100)}else{$ry(e).animate({opacity:0},800,function(){$ry(e).hide();r(false)})}},4e3)}})();$ry(".rys-prompt-bubble-wrap").click(function(){var e=this;if($ry.browser&&$ry.browser.msie||$ry.support&&!$ry.support.opacity){setTimeout(function(){$ry(e).hide()},100)}else{$ry(e).animate({opacity:0},800,function(){$ry(e).hide()})}});if(!$ry("body").attr("isloadjs")){$ry(".rys-birdie").bind("click",function(r){var t=$ry(this).attr("cat");try{document.getElementById("ruyisoplugin").runRYS(elfin.index[t]);e.rys_trace.trace_fun("click_"+t)}catch(i){var n="<div id='rys_prompt'>"+"<a class='rys-close-button'/>"+"<span>\u8bf7\u5230\u5982\u610f\u641c\u5b98\u7f51\u4e0b\u8f7d\u5b8c\u6574\u7248\uff0c\u4eab\u53d7\u5168\u9762\u7684\u5a31\u4e50\u4f53\u9a8c</span>"+"<a class='rys-down-button' href='http://www.ruyiso.net' target='_blank'>\u7acb\u5373\u4e0b\u8f7d</a>"+"</div>";var s=($ry(window).width()-300)/2;var a=($ry(window).height()-200)/2;$ry(n).appendTo($ry("body")).css({left:s,top:a}).find(".rys-close-button").bind("click",function(){$ry(this).parent().remove()})}r.preventDefault();r.stopPropagation();return false})}$ry(function(){var r=true;try{r=document.getElementById("ruyisoplugin").isLoadJS||false}catch(t){r=document.body.getAttribute("isLoadJS")=="true"?true:false}if(r){$ry("#rys-elfin").show()}e.rys_trace.trace_fun("load",{ss:r?"s":"h"})})}};